version: "0.3"
server:
#   port: 3000
  verbosity: debug
#   timezone: UTC
  authentication: basic
  cache:
    provider: memory
    database: cache
    options:
      autocreate: true

roles:
  admin: lacrud
  jsonreader: r
  lister: l
  memlister: lr
  modifier: cud

users:
  myapiuser:
    password: myStr@ngpa$$w0rd
    # secret: 1234567890
    roles: [lister,admin]

sources:
  mem-data:
    provider: memory
    database: mem
    options:
      autocreate: true
  fs-v2:
    provider: files
    options:
      storage: fs
      fs-folder: ./data/
      autocreate: true
      content:
        "*.csv":
          type: csv
          csv-delimiter: ";"
          csv-newline: "\r\n"
          csv-header: true
          csv-quote: "\""
        "ref*.xlsx":
          type: xls
          xls-sheet: Feuil1
        "sample*.xlsx":
          type: xls
          xls-starting-cell: E6
  ftp:
    provider: files
    options:
      storage: ftp
      ftp-host: localhost
      ftp-port: 21
      ftp-user: ftpuser
      ftp-password: ftppass
      ftp-folder: /
      autocreate: true
      content:
        "*.csv":
          type: csv
          csv-delimiter: ";"
          csv-newline: "\r\n"
          csv-header: true
          csv-quote: "\""

#   ms-hr:
#     provider: mssql
#     host: localhost
#     port: 1433
#     user: sa
#     password: Azerty123!
#     database: hr
#   mdb-mflix:
#     provider: mongodb
#     host: mongodb://localhost:27017/
#     database: mflix
#     options:
#       connectTimeoutMS: 5000
#       serverSelectionTimeoutMS: 5000
#   plan-etl1:
#     provider: plan
#     database: etl1
#   fs-json-data:
#     provider: files
#     options:
#       storage: fs
#       content: json
#       fs-folder: ./data/
#       json-path: rows
#   az-json-data:
#     provider: files
#     options:
#       storage: az-blob
#       content: json
#       az-blob-connection-string: UseDevelopmentStorage=true
#       az-blob-container: datacontainer1

schemas:
  mem:
    source: mem-data
    # roles: [jsonreader, lister, memlister]
  xls:
    source: fs-xls
  csv:
    source: fs-csv
  v2:
    source: fs-v2
  ftp:
    source: ftp
  #
#   hr:
#     source: ms-hr
#   mflix:
#     source: mdb-mflix
#   etl1:
#     source: plan-etl1
#   fsjson:
#     source: fs-json-data
#   azjson:
#     source: az-json-data

# ai-engines:
#   ocr:
#     engine: tesseractjs
#     model: eng
#   image-classify:
#     engine: tensorflowjs
#     model: image-classify
#   sentiment:
#     engine: nlpjs
#     model: sentiment
#     options:
#       lang: en
#   guess-lang:
#     engine: nlpjs
#     model: guess-lang
#     options:
#       accept: en,fr

# schedules:
#   test:
#     cron: "@start"
#     plan: etl1
#     entity: src

# plans:
#   etl1:
#     src:
#       - insert:
#           data:
#             - img_to_text: https://tesseract.projectnaptha.com/img/eng_bw.png
#               img_to_classify: https://thumbs.dreamstime.com/b/isolated-classical-guitar-photo-png-format-available-full-transparent-background-54363220.jpg
#             - img_to_text: https://jeroen.github.io/images/testocr.png
#               img_to_classify: https://img.freepik.com/premium-photo/golden-retriever-lying-panting-isolated-white_191971-16974.jpg
#             - img_to_text: https://www.srcmake.com/uploads/5/3/9/0/5390645/ocr_orig.png
#               img_to_classify: https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTPpDgjJjrakUj3VlDC0K6XtdCRu5TK7CPXr7QHVjiL&s

#     aitest2:
#       - debug:
#       - select:
#           schema: mflix
#           entity: movies
#           filter:
#             year: 2001
#           fields: title
#       - run:
#           ai: sentiment
#           input: title
#           output:
#             vote: sentiment
#     aitest:
#       - debug:
#       - insert:
#           data:
#             - img_to_text: https://tesseract.projectnaptha.com/img/eng_bw.png
#               img_to_classify: https://thumbs.dreamstime.com/b/isolated-classical-guitar-photo-png-format-available-full-transparent-background-54363220.jpg
#             - img_to_text: https://jeroen.github.io/images/testocr.png
#               img_to_classify: https://img.freepik.com/premium-photo/golden-retriever-lying-panting-isolated-white_191971-16974.jpg
#             - img_to_text: https://www.srcmake.com/uploads/5/3/9/0/5390645/ocr_orig.png
#               img_to_classify: https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTPpDgjJjrakUj3VlDC0K6XtdCRu5TK7CPXr7QHVjiL&s
#       - run:
#           ai: ocr
#           input: img_to_text
#           output:
#             confidence: ocr_confidence
#             text: ocr_text
#       - run:
#           ai: image-classify
#           input: img_to_classify
#           output:
#             class: object
#       - run:
#           ai: sentiment
#           input: ocr_text
#           output: sentiment
#       - run:
#           ai: guess-lang
#           input: ocr_text
#           output:


#####

    
# version: "0.3"
# server:
#   port: 3000
#   verbosity: debug
#   timezone: UTC
#   authentication:
#   request-limit: 100mb
#   cache:
#     provider: mongodb
#     host: mongodb://localhost:27017/
#     database: metal_cache
#     options:
#       connectTimeoutMS: 5000
#       serverSelectionTimeoutMS: 5000

# users:
#   myapiuser: myStr@ngpa$$w0rd

# sources:
#   ms-hr:
#     provider: mssql
#     host: localhost
#     port: 1433
#     user: sa
#     password: Azerty123!
#     database: hr
#   mdb-mflix:
#     provider: mongodb
#     host: mongodb://localhost:27017/
#     database: mflix
#     options:
#       connectTimeoutMS: 5000
#       serverSelectionTimeoutMS: 5000
#   pg-northwind:
#     provider: postgres
#     host: localhost
#     port: 5432
#     user: admin
#     password: "123456"
#     database: northwind
#   pg-clubdata:
#     provider: postgres
#     host: localhost
#     port: 5433
#     user: admin
#     password: "123456"
#     database: clubdata
#   pg-clubdata-bookings:
#     provider: postgres
#     host: localhost
#     port: 5434
#     user: admin
#     password: "123456"
#     database: clubdata
#   pg-clubdata-facilities:
#     provider: postgres
#     host: localhost
#     port: 5435
#     user: admin
#     password: "123456"
#     database: clubdata
#   pg-clubdata-members:
#     provider: postgres
#     host: localhost
#     port: 5436
#     user: admin
#     password: "123456"
#     database: clubdata
#   plan-etl1:
#     provider: plan
#     database: etl1

# schemas:
#   northwind:
#     source: pg-northwind

#   mflix:
#     source: mdb-mflix

#   clubdata:
#     source: pg-clubdata

#   clubdata-merged:
#     entities:
#       members:
#         source: pg-clubdata-members
#         entity: members
#       facilities:
#         source: pg-clubdata-facilities
#         entity: facilities
#       bookings:
#         source: pg-clubdata-bookings
#         entity: bookings

#   merge:
#     source: pg-clubdata
#     entities:
#       orders:
#         source: pg-northwind
#         entity: orders
#       users:
#         source: mdb-mflix
#         entity: users

#   sch-etl1:
#     source: plan-etl1